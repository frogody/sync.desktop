@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   Base Styles
   ============================================================================ */

:root {
  --sync-blue: #3B82F6;
  --sync-purple: #8B5CF6;
  --sync-cyan: #06B6D4;
  --sync-glow: rgba(59, 130, 246, 0.5);
}

* {
  box-sizing: border-box;
}

/* Force transparent backgrounds for Electron window */
html, body, #root {
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  background-color: transparent !important;
  overflow: hidden;
}

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ============================================================================
   Avatar Mode - Black background with glow effect
   ============================================================================ */

.mode-avatar {
  background: #000000 !important;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ============================================================================
   Chat/Voice Mode - Solid Background with Rounded Corners
   Matches web app styling (zinc-900 dark theme)
   ============================================================================ */

.mode-chat,
.mode-voice {
  background: rgba(24, 24, 27, 0.98) !important; /* zinc-900 */
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.1);
  /* Ensure solid background on macOS transparent windows */
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
}

/* Additional solid background layer for chat/voice */
.mode-chat::before,
.mode-voice::before {
  content: '';
  position: absolute;
  inset: 0;
  background: #18181b; /* zinc-900 */
  border-radius: 16px;
  z-index: -1;
}

/* ============================================================================
   Scrollbar Styling - Subtle gray to match zinc theme
   ============================================================================ */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(113, 113, 122, 0.3); /* zinc-500 */
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(113, 113, 122, 0.5); /* zinc-500 */
}

/* ============================================================================
   Avatar Glow Animation
   ============================================================================ */

@keyframes avatar-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 15px var(--sync-blue));
  }
  50% {
    filter: drop-shadow(0 0 25px var(--sync-purple));
  }
}

@keyframes avatar-speaking {
  0%, 100% {
    transform: scale(1);
    filter: drop-shadow(0 0 20px var(--sync-cyan));
  }
  25% {
    transform: scale(1.02);
    filter: drop-shadow(0 0 30px var(--sync-blue));
  }
  50% {
    transform: scale(1);
    filter: drop-shadow(0 0 25px var(--sync-purple));
  }
  75% {
    transform: scale(1.01);
    filter: drop-shadow(0 0 30px var(--sync-cyan));
  }
}

@keyframes avatar-listening {
  0%, 100% {
    transform: scale(1);
    filter: drop-shadow(0 0 20px rgba(6, 182, 212, 0.8));
  }
  50% {
    transform: scale(1.05);
    filter: drop-shadow(0 0 35px rgba(6, 182, 212, 1));
  }
}

@keyframes avatar-thinking {
  0% {
    filter: drop-shadow(0 0 15px var(--sync-blue));
  }
  33% {
    filter: drop-shadow(0 0 20px var(--sync-purple));
  }
  66% {
    filter: drop-shadow(0 0 20px var(--sync-cyan));
  }
  100% {
    filter: drop-shadow(0 0 15px var(--sync-blue));
  }
}

.avatar-idle {
  animation: avatar-pulse 3s ease-in-out infinite;
}

.avatar-speaking {
  animation: avatar-speaking 0.8s ease-in-out infinite;
}

.avatar-listening {
  animation: avatar-listening 1.5s ease-in-out infinite;
}

.avatar-thinking {
  animation: avatar-thinking 1.5s linear infinite;
}

/* ============================================================================
   Input Styling - Matches web app styling
   ============================================================================ */

.chat-input {
  @apply rounded-xl px-4 py-3;
  @apply text-white placeholder-zinc-500;
  @apply focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/20;
  @apply transition-all duration-200;
  background: rgba(39, 39, 42, 0.5); /* zinc-800/50 */
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.chat-input:focus {
  background: rgba(39, 39, 42, 0.7);
  border-color: rgba(6, 182, 212, 0.5); /* cyan-500/50 */
}

/* ============================================================================
   Button Styling
   ============================================================================ */

.btn-primary {
  @apply bg-gradient-to-r from-cyan-500 to-blue-500;
  @apply text-white font-medium rounded-xl px-4 py-2;
  @apply hover:opacity-90 active:scale-95;
  @apply transition-all duration-200;
  @apply shadow-lg shadow-cyan-500/20;
}

.btn-ghost {
  @apply bg-white/5 text-white/70 rounded-xl px-4 py-2;
  @apply hover:bg-white/10 hover:text-white;
  @apply transition-all duration-200;
}

/* ============================================================================
   Message Bubbles - Matches web app styling
   ============================================================================ */

.message-user {
  @apply text-white rounded-2xl px-4 py-3;
  @apply max-w-[80%] ml-auto;
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.9), rgba(59, 130, 246, 0.9));
}

.message-assistant {
  @apply text-zinc-200 rounded-2xl px-4 py-3;
  @apply max-w-[80%];
  background: rgba(39, 39, 42, 0.8); /* zinc-800/80 */
  border: 1px solid rgba(255, 255, 255, 0.05);
}

/* ============================================================================
   Voice Mode Visualization
   ============================================================================ */

.voice-wave {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 3px;
  height: 40px;
}

.voice-bar {
  width: 4px;
  background: linear-gradient(to top, var(--sync-blue), var(--sync-purple));
  border-radius: 2px;
  animation: voice-bar 0.8s ease-in-out infinite;
}

.voice-bar:nth-child(1) { animation-delay: 0s; }
.voice-bar:nth-child(2) { animation-delay: 0.1s; }
.voice-bar:nth-child(3) { animation-delay: 0.2s; }
.voice-bar:nth-child(4) { animation-delay: 0.3s; }
.voice-bar:nth-child(5) { animation-delay: 0.4s; }

@keyframes voice-bar {
  0%, 100% { height: 10px; }
  50% { height: 35px; }
}

/* ============================================================================
   Close Button
   ============================================================================ */

.close-button {
  @apply absolute top-3 right-3 w-6 h-6;
  @apply flex items-center justify-center;
  @apply rounded-full bg-white/10 text-white/60;
  @apply hover:bg-white/20 hover:text-white;
  @apply transition-all duration-200 cursor-pointer;
  -webkit-app-region: no-drag;
}
